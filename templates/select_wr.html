{% extends "base.html" %}
{% block content %}
    
<div id="flash-messages"></div>

<h1>Water reservoir selection</h1>
<p>Zoom to the area of interest and select the water reservoir by clicking on its border line</p>

<div class="container-fluid" style="background-color: rgb(242, 242, 242);">
    <div class="row">
        <div class="col-12 col-lg-9">          

            <div id="map" style="width: 100%; height: 70vh;">
                <div id="loading">Uploading data...</div>
            </div>

        </div>

        <div class="col-12 gy-2 col-lg-3">

            <h2 class="mb-3">Selected water reservoir</h2>

            <form id="waterbody-form" style="margin-top: 20px;">

                <div class="mb-3">
                    <label for="name" class="form-label">Reservoir name:</label>
                    <input type="text" class="form-control" id="name" name="name" readonly>
                </div>

                <div class="mb-3">
                    <label for="osm_id" class="form-label">OSM ID:</label>
                    <input type="text" class="form-control" id="osm_id" name="osm_id" readonly>
                </div>

                <div class="mb-3">
                    <label for="wq_feature_sel" class="form-label">Water quality feature:</label>
                    <div class='input-group mb-3'>

                        <select class="form-select" id="sel_wq" name="wq_feature_sel" aria-describedby="select_wq_info_add">
                            <option value="">Select water quality parameter</option>
                            <option value="ChlA">ChlA</option>
                            <option value="TSS">TSS</option>
                            <option value="PC">PC</option>
                            <option value="APC">APC</option>
                            <option value="PE">PE</option>
                            <option value="ChlB">ChlB</option>
                            <option value="CX">CX</option>
                        </select>

                        <span class="btn btn-outline-secondary" id="select_wq_info_add" tabindex="0">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"></path>
                                <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2 .176-.492 .246-.686 .246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"></path>
                            </svg>
                        </span>

                    </div>
                </div>

                <div class="mb-3">
                    <label for="model_name" class="form-label">Select prediction model:</label>
                    <select class="form-select" id="sel_model" name="model_name">
                        
                    </select>
                </div>

                <div class="d-grid gap-2 mt-4">
                    <button type="button" class="btn btn-primary" id="confirm-btn-processing">Confirm selection</button>
                </div>
                <div class="d-grid gap-2 mt-4 mb-4">                     
                    <a href="/ts_analysis" class="btn btn-success" id="ts-btn">Time series analysis</a>
                    <a href="/sp_analysis" class="btn btn-success" id="sp-btn">Spatial analysis</a>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="prekryti" style="display: none;">
    <div id="dialog">
        <h2>Do you want to run the analysis?</h2>
        <p id="souhrnInformaci">Zde bude souhrn informací.</p>
        <button type="button" class="btn btn-outline-primary" id="potvrditDialog">OK</button>
        <button type="button" class="btn btn-outline-secondary" id="zrusitDialog">Cancel</button>
    </div>
</div>

<script src="https://unpkg.com/@turf/turf@6.5.0/turf.min.js"></script>
<script src="https://unpkg.com/@turf/turf@6.5.0/turf.min.js"></script>

<script src="static/js/wqf_info.js">
    // rovide info about water quality features in a popover when the user clicks on the button
</script>

<script src="static/js/select_new_wr.js">
    // Selection of a new water reservoir and sending the data to the server
</script>

<script src="static/js/select_wr_websocket_connect.js">
    // Připojení k WebSocket serveru
</script>

<script src="static/js/select_models.js">
    // Select prediction model and water quality feature
</script>

{% endblock%}